#!/bin/bash
#
# Create a new note in my zet repository

# Prompt the user for a filename
get_filename() {
  while true; do
    read -rp "Enter a filename: " filename
    if [[ -z "$filename" ]]; then
      echo "Please provide a valid filename"
    else
      break
    fi
  done
}

# Create, format and open file
open_file() {
  local target_directory="$1"
  local filename="$2"
  local full_filename="$target_directory/$filename.md"

  touch "$full_filename"

  format_filename=$(echo "$filename" | sed 's/[-]/ /g; s/^./\u&/')

  {
    echo "# $format_filename"
    echo -en "\n""\n""\n"
    echo "## Links"
    echo -en "\n"
    echo -en "- []()"
  } >>"$full_filename"
  
  vi "$full_filename"
}

target_directory="$ZET/doc"

get_filename
open_file "$target_directory" "$filename"
